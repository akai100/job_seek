# 1. 内存管理基础知识
## 1.1 内存管理的 “远古时代”
两种内存管理思想：
+ 单道编程的内存管理
  整个系统只有一个用户进程和一个操作系统，在这种模型下，用户程序始终加载到同一个内存地址并运行，程序使用的地址就是物理地址，不需要保护地址。
  缺点：
  + 系统无法运行比实际物理内存大的程序；
  + 系统只运行一个程序，会造成资源浪费；
  + 程序无法迁移到其他的计算机中；
+ 多道编程的内存管理
  系统可以同时运行多个进程。内存管理中出现了固定分区和动态分区两种计数。

固定分区：在系统编译阶段，内存被划分成许多静态分区，进程可以装入大于或等于自身大小的分区。固定分区实现简单，操作系统的管理开销比较小。
缺点：
+ 程序大小和分区的大小必须分配；
+ 活动进程的数目比较固定；
+ 地址空间无法增长；

动态分区：在已整块内存中划出一块内存供操作系统本身使用，剩下的内存空间供用户进程使用。
缺点：会出现很多内存空洞，内存的利用率随之下降。这些内存空洞便是我们常说的内存碎片。

## 1.2 地址空间的抽象
进程可能需要使用内存的3个地方：
+ 代码段以及数据段用来存储程序本身需要的数据；
+ 在栈空间，程序运行时需要分配内存空间来保存函数调用关系、局部变量、函数参数以及函数返回值等内容。
+ 在堆空间中，程序运行时需要动态分配程序需要使用的内存。

设计人员对内存进行抽象，把内存抽象成进程地址空间或虚拟内存。进程不关心分配的内存在哪个地址，只管使用。最终由处理器进程对内存的请求，经过转换之后把进程请求的虚拟地址
转换成物理地址。这个转换过程称为地址转换，进程请求的地址可以理解为虚拟地址。

## 1.3 分段机制
基本思想：把程序所需的内存空间的虚拟地址映射到某个物理地址空间。
进程在运行时看到的地址是虚拟地址，然后通过 CPU 提供的地址映射方法把虚拟地址转换成实际的物理地址。当多个进程在运行时，这种方法可以保证每个进程的虚拟地址空间是相互隔离的。
操作系统只需要维护虚拟地址到物理地址的映射关系。

## 1.4 分页机制
